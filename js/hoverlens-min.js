(function(h){var m,G,y,B,b,u,t,o={},F={},k,e,z,l,H,q=false,A;if(navigator.appName=="Microsoft Internet Explorer"){A=navigator.userAgent;if(A.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/)!=null){if(parseFloat(RegExp.$1)<11){q=true}}}h(window).on("load",r);function r(){m=h("img[data-sim-id]");if(m.length==0){return true}if(typeof simdata=="undefined"||simdata==null){console.log("hoverlens.js: simdata not defined or empty");return true}if(!simdata.hasOwnProperty("lensdata")){console.log("hoverlens.js: Missing lensdata property");return true}h("img").mouseover(g);h("img").mouseout(f)}function g(d){try{y=x(d);if(y>=0){k=new Image();k.src=m[y].src;h(d.target).addClass("sim_imgpending");k.onload=function(){h(d.target).removeClass("sim_imgpending");if(E(m[y].getAttribute("data-sim-id"))){h(m[y]).addClass(G.cur);v(m[y]);w();D();p()}}}}catch(d){console.log("SIM mouseOver() - "+d.message)}}function f(d){try{if(y>=0){if(typeof m[y]!="undefined"){h(m[y]).unbind("mousemove");if("onwheel" in window){m[y].removeEventListener("wheel",C);window.onwheel=function(){return true}}else{m[y].removeEventListener("mousewheel",C);document.onmousewheel=function(){return true}}}if(G){h(m[y]).removeClass(G.cur)}if(q){if(typeof u!="undefined"){h(u).remove()}}else{if(typeof b!="undefined"){h(b).remove()}}if(G&&G.shz=="yes"&&typeof B!="undefined"){h(B).remove()}}}catch(d){console.log("SIM mouseOut() - "+d.message)}}function x(i){if(typeof i=="object"&&i.hasOwnProperty("target")){var d=m.length,s;for(s=0;s<d;s++){if(m[s]==i.target){return s}}}return -1}function w(){b=document.createElement("canvas");b.id="sim_lens";if(q){u=document.createElement("div");u.id="sim_lenswrap";u.appendChild(b);document.body.appendChild(u)}else{document.body.appendChild(b)}t=b.getContext("2d");if(G.shz=="yes"){B=document.createElement("div");B.id="sim_magnification";document.body.appendChild(B)}b.width=m[y].width*G.wdh/100;b.height=G.squ=="yes"?b.width:m[y].height*G.hgt/100;e=b.width/2;z=b.height/2}function p(){h(m[y]).mousemove(n);if("onwheel" in window){window.onwheel=function(){return false};m[y].addEventListener("wheel",C,true)}else{document.onmousewheel=function(){return false};m[y].addEventListener("mousewheel",C,true)}}function C(i){if(!i){return true}var d=i.deltaY>0?"out":"in";if(i.type!="wheel"){d=i.wheelDelta>0?"out":"in"}G.zoomFactor(d);a(i)}function j(s){B.textContent="x: "+G.zoom.toFixed(2);var i=s.pageX-20,d=q==true?s.pageY-35:s.pageY-(z+35);B.setAttribute("style","display:block;top:"+d+"px;left:"+i+"px;")}function n(i){G.relX=i.pageX-G.imgLeft;G.relY=i.pageY-G.imgTop;if(q){G.lft=i.pageX-(b.width/2);G.top=i.pageY+(b.height/4);u.setAttribute("style",G.getWrapCSS()+" height:"+b.height+"px;width:"+b.width+"px;")}else{G.lft=i.pageX-e;G.top=i.pageY-z}a(i);var d=q?"position:relative":"position:absolute;";b.setAttribute("style",G.getCSS()+d+" top:"+G.top+"px; left:"+G.lft+"px;")}function E(i){var d=false;h.each(simdata.lensdata,function(s,I){if(s==i){G=new c();h.each(I,function(K,J){if(G.hasOwnProperty(K)){G[K]=J}});G.zoomFactor("init");d=true}});return d}function a(i){t.setTransform(1,0,0,1,0,0);t.clearRect(0,0,b.width,b.height);o.w=l/G.zoom;o.h=H/G.zoom;o.x=(G.relX*G.row)-(o.w/2);o.y=(G.relY*G.roh)-(o.h/2);F.x=0;F.y=0;F.w=b.width;F.h=b.height;if(o.x<0){F.x-=o.x/G.row*G.zoom;o.x=0}if(o.y<0){F.y-=o.y/G.roh*G.zoom;o.y=0}if((o.x+o.w)>k.width){o.w=k.width-o.x;F.w=o.w/G.row*G.zoom}if((o.y+o.h)>k.height){o.h=k.height-o.y;F.h=o.h/G.roh*G.zoom}try{t.drawImage(k,o.x,o.y,o.w,o.h,F.x,F.y,F.w,F.h)}catch(d){console.log("SIM drawImage() - "+d.message)}if(G.shz=="yes"){j(i)}}function v(d){var i=d.getBoundingClientRect(),I=window.pageXOffset||document.documentElement.scrollLeft,s=window.pageYOffset||document.documentElement.scrollTop;G.imgTop=i.top+s+d.clientTop;G.imgLeft=i.left+I+d.clientLeft}function D(){G.row=k.naturalWidth/m[y].clientWidth;G.roh=k.naturalHeight/m[y].clientHeight;l=b.width*G.row;H=b.height*G.roh}function c(){this.izf="110";this.wzi="5";this.zoom=0;this.czm="";this.squ="no";this.crd="0";this.hgt="50";this.wdh="40";this.lft="";this.top="";this.relX="";this.relY="";this.row=1;this.roh=1;this.zdir="";this.shz="no";this.cur="sim_def_cursor";this.getCSS=function(){var d="display:block;background:white;";d=d+"border-radius:"+this.crd+"%;";return d};this.zoomFactor=function(i){var d;if(i=="init"){d=this.izf}if(i=="out"){this.zdir="out";d=parseFloat(this.czm)+parseFloat(this.wzi)}if(i=="in"){this.zdir="in";d=parseFloat(this.czm)-parseFloat(this.wzi)}this.czm=d>100?d:100;this.zoom=this.czm/100};this.getWrapCSS=function(){var d="";if(this.left!=""){d=d+"left:"+this.left+"px;"}if(this.top!=""){d=d+"top:"+this.top+"px;"}return d}}})(jQuery);